"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function _createClass(t,e,n){return e&&_defineProperties(t.prototype,e),n&&_defineProperties(t,n),t}var Cart=function(){function t(){_classCallCheck(this,t),this.blank=document.querySelector(".blank"),this.button=document.querySelector(".blank button"),this.init()}return _createClass(t,[{key:"init",value:function(){var w,t=window.localStorage,O=t.getItem("carts")?t.getItem("carts"):"";2==Array.from(O).length?(this.blank.style.display="block",this.button.onclick=function(){location.href="http://localhost/lianxiang_project/dist/pages/list.html"}):function(){var t=convertStrToObj(O);for(var e in t){var n=t[e],o='\n                <ul class="goodInfo container" data-good-id="'.concat(e,'">\n                <li class = "xuan">\n                <input type="checkbox">\n            </li>\n            <li><img src=').concat(n.src," />\n                <div>").concat(n.name,"</div>\n            </li>\n            <li></li>\n            <li>").concat(n.price,'</li>\n            <li class="num">\n                <a href="javascript:;" class="minus">-</a>\n                <input type="text" name="" id="" value="').concat(n.num,'" />\n                <a href="javascript:;" class="plus">+</a>\n            </li>\n            <li class="total">').concat(n.num*n.price,'</li>\n            <li><a href="javascript:;" class="del">删除</a></li>\n            </ul> \n           ');$("#main").append(o)}$("#pay").append(' <ul class="goodFoot container" >\n            <li class = "all">\n                <input type="checkbox">\n                <a href="javascript:;">全选</a>\n            </li>\n            <li>\n                <p class ="total-price1">商品总价：计算中...</p>\n            </li>\n        </ul>');for(var r=document.querySelectorAll(".goodInfo .minus"),a=0,i=r.length;a<i;a++)r[a].onclick=function(){var t=document.querySelector(".goodInfo").getAttribute("data-good-id"),e=window.localStorage,n=convertStrToObj(e.getItem("carts")?e.getItem("carts"):"");1<n[t].num&&n[t].num--,e.setItem("carts",JSON.stringify(n)),this.nextElementSibling.value=n[t].num,this.parentNode.nextElementSibling.innerHTML=n[t].price*n[t].num};for(var l=document.querySelectorAll(".goodInfo .plus"),c=0,s=l.length;c<s;c++){l[c].onclick=function(){var t=this.parentNode.parentNode.getAttribute("data-good-id"),e=window.localStorage,n=convertStrToObj(e.getItem("carts")?e.getItem("carts"):"");n[t].num++,e.setItem("carts",JSON.stringify(n)),this.previousElementSibling.value=n[t].num,this.parentNode.nextElementSibling.innerHTML=n[t].price*n[t].num};for(var u=document.querySelectorAll(".goodInfo .num input"),d=0,g=u.length;d<g;d++)u[d].onblur=function(){var t=this.parentNode.parentNode.getAttribute("data-good-id"),e=window.localStorage,n=convertStrToObj(e.getItem("carts")?e.getItem("carts"):"");(isNaN(this.value)||this.value<1)&&(this.value=1),n[t].num=this.value,e.setItem("carts",JSON.stringify(n)),this.parentNode.nextElementSibling.innerHTML=n[t].price*n[t].num};for(var m=document.querySelectorAll(".goodInfo .del"),p=0,h=m.length;p<h;p++)m[p].onclick=function(){var t=this.parentNode.parentNode.getAttribute("data-good-id"),e=window.localStorage,n=convertStrToObj(e.getItem("carts")?e.getItem("carts"):"");delete n[t],e.setItem("carts",JSON.stringify(n)),this.parentNode.parentNode.remove()}}for(var f=document.querySelectorAll(".goodInfo .num input"),v=0,S=f.length;v<S;v++)f[v].onblur=function(){var t=this.parentNode.parentNode.getAttribute("data-good-id"),e=window.localStorage,n=convertStrToObj(e.getItem("carts")?e.getItem("carts"):"");(isNaN(this.value)||this.value<1)&&(this.value=1),n[t].num=this.value,e.setItem("carts",JSON.stringify(n)),this.value=n[t].num,this.parentNode.nextElementSibling.innerHTML=n[t].price*n[t].num};for(var b=document.querySelectorAll(".goodInfo .del"),N=0,y=b.length;N<y;N++)b[N].onclick=function(){alert("确认删除吗？");var t=this.parentNode.parentNode.getAttribute("data-good-id"),e=window.localStorage,n=convertStrToObj(e.getItem("carts")?e.getItem("carts"):"");delete n[t],e.setItem("carts",JSON.stringify(n)),this.parentNode.parentNode.remove(),location.reload()};var I=document.querySelectorAll(".xuan input"),k=document.querySelectorAll(".all input");for(w=0;w<k.length;w++)!function(){var o=!0;k[w].onclick=function(){if(o){for(var t=0,e=0;e<I.length;e++)I[e].checked=!0,t+=Number($(".total").html());$(".total-price1").html("商品总价:￥"+t.toFixed(2)+"元"),o=!1}else{for(var n=0;n<I.length;n++)I[n].checked=!1;o=!0,$(".total-price1").html("商品总价:￥0.00元")}}}()}()}}]),t}();function convertStrToObj(t){return t?JSON.parse(t):{}}window.onload=function(){new Cart};var login=document.cookie;login.split(";")[1]||$("head").append("<meta http-equiv='refresh'content='0.1;url=http://localhost/lianxiang_project/dist/pages/login.html'></meta http-equiv>");